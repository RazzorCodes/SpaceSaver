# PVC for the transcoded output library, SQLite database, progress JSONs,
# and the .spacesaver-transcode flat tracking file.
#
# This volume is READ-WRITE for the transcoder pod.
# storageClassName: Change to match your cluster (see pvc-source.yaml for options).
#
# Size: must be large enough to hold your entire finished library.
# A 1Ti source can grow slightly or shrink significantly after H.265 encoding.
# Size conservatively â€” at least equal to your current source library.
#
# ReadWriteMany (RWX) is required if you ever want to run multiple replicas
# (currently the deployment uses 1 replica, but RWX is set for future-proofing).

apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: spacesaver-dest
  namespace: kube-idle
  labels:
    app: spacesaver
spec:
  accessModes:
    - ReadWriteMany
  storageClassName: nas-slow-volume # <-- CHANGE to your storage class
  resources:
    requests:
      storage: 490Gi # <-- CHANGE to the size of your output library
---
